



<script type="text/javascript" charset="utf-8">
/*
function f(e) { console.log(e); }

// Get page screenshot as weibo picture
$.ajax({
type: 'POST',
url: 'http://screener.brachium-system.net/shot',

data: { url: 'http://reduci.net/link/2012/09/02/unit-test/' },

success:  function(body, e, r) {
    if (!e) {
      console.log(body);
      try {
        body = JSON.parse(body);
      } catch (ee) {
        e = ee;
      }   
      if (!body.file) e = new Error('no body.file');
      if (body.error) e = new Error(body.error);
    }   
    if (e) f(e);
    else $.ajax({
        type: 'POST',
        url: 'http://screener.brachium-system.net/' + body.file,
        success: function(b, r, e) {

          if (e) f(e);
          else f(null, b);

          console.log(b);
        }
    });  
  },

beforeSend: function(xhr) {
  xhr.setRequestHeader("Access-Control-Allow-Origin", '*');
  xhr.setRequestHeader("host", 'screener.brachium-system.net');
  xhr.setRequestHeader("origin", 'http://screener.brachium-system.net');
  xhr.setRequestHeader("referer", 'http://screener.brachium-system.net/');
}


headers: {
  "Host": 'screener.brachium-system.net',
  "Origin": 'http://screener.brachium-system.net',
  "Referer": 'http://screener.brachium-system.net/'
}



});  

*/


var title = "【{{ page.title }}】";
/* why convert to html and then convert back?  Because raw page.content could includes newlines that cannot be striped! Ugly! */
var content = title + "{{  page.content | strip_newlines  | markdownify | strip_html }}";
/* Set string length limited to at most 140 letters/Chinese characters limited by Weibo.com ( 20 chars used by title and url ) */
if( content.length > 100)
  content = content.substr(0, 100) + "...";

(function(t){
 var _w = 16 , _h = 16;
 var param = {
url:location.href,
type:'3',
count:'', /**是否显示分享数，1显示(可选)*/
appkey:'', /**您申请的应用appkey,显示分享来源(可选)*/
title:t, /**分享的文字内容(可选，默认为所在页面的title)*/
pic: "{{ site.production_url }}" + "/assets/images/homepage.png", /**分享图片的路径(可选)  screencapture needed ?? maybe? */
ralateUid:'2141239811', /**关联用户的UID，分享微博会@该用户(可选)  That's me: @reduci */
language:'zh_cn', /**设置语言，zh_cn|zh_tw(可选)*/
rnd:new Date().valueOf()
}
var temp = [];
for( var p in param ){
temp.push(p + '=' + encodeURIComponent( param[p] || '' ) )
}
document.write('<iframe allowTransparency="true" frameborder="0" scrolling="no" src="http://hits.sinajs.cn/A1/weiboshare.html?' + temp.join('&') + '" width="'+ _w+'" height="'+_h+'"></iframe>')
})( content  + " | {{ site.title }}" )
</script>




